
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>She Lab One-Stop Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React + ReactDOM + Babel (CDN, for zero-build demo) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-neutral-950 text-neutral-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    // ---- Locked site list (DO NOT CHANGE) ----
    const LINKS = [
      // ===== Admin =====
      { name: "Ariba Buying", url: "https://s1.ariba.com/gb/?realm=ntu&locale=en_US", category: "Admin", guidance: { href: "files/Ariba buying.pdf", filename: "Ariba buying.pdf" } },
      { name: "Store Buying", url: "https://ntuestore.azurewebsites.net/", category: "Admin" },
      { name: "Reimbursement", url: "https://venus.wis.ntu.edu.sg/ICS/home.aspx", category: "Admin", guidance: { href: "files/reimbersement.pdf", filename: "reimbersement.pdf" } },
      { name: "Biobasic Primers Ordering", url: "https://biobasic-asia.com/", category: "Admin" },
      { name: "Sanger Sequencing Ordering", url: "https://customerportal-legacy.biobasic-asia.com/Account/Login?ReturnUrl=%2FSequencingOrder%2FCreate", category: "Admin", guidance: { note: "Email zac@biobasic-asia.com for access." } },
      { name: "Nanopore Sequencing", url: "https://app.plasmidsaurus.com/home", category: "Admin" },

      // ===== Learning =====
      { name: "NTU Learn", url: "https://ntulearn.ntu.edu.sg/ultra/institution-page", category: "Learning" },

      // ===== Research =====
      { name: "Safety Training (Document)", url: "#", category: "Research", guidance: { href: "files/safety training.docx", filename: "safety training.docx" } },
      { name: "Core Facility Booking", url: "https://cebs.ntu.edu.sg/fom/", category: "Research", guidance: { note: "Email kaydencekwek@ntu.edu.sg to obtain appointment access." } },
      { name: "Benchling", url: "https://www.benchling.com/", category: "Research" },
      { name: "Codon Optimization", url: "https://sg.idtdna.com/pages/tools/codon-optimization-tool?returnurl=%2FCodonOpt", category: "Research" },
      { name: "DepMap", url: "https://depmap.org/portal/", category: "Research" },
      { name: "Fluorescence Information", url: "https://www.fpbase.org/", category: "Research" },
      { name: "BLAST", url: "https://blast.ncbi.nlm.nih.gov/Blast.cgi#alnHdr_568815583", category: "Research" },
      { name: "Primer-BLAST", url: "https://www.ncbi.nlm.nih.gov/tools/primer-blast/index.cgi?GROUP_TARGET=on", category: "Research" },
      { name: "PDB", url: "https://www.rcsb.org/", category: "Research" },
      { name: "UniProt", url: "https://www.uniprot.org/", category: "Research" },
    ];

    const CATEGORIES = ["All", "Admin", "Learning", "Research", "Favorites"];

    function App() {
      const [query, setQuery] = useState("");
      const [category, setCategory] = useState("All");
      const items = LINKS;

      useEffect(() => {
        try {
          console.group("She Lab One‑Stop Portal • self tests");
          console.assert(Array.isArray(LINKS) && LINKS.length === 17, "LINKS length should be 17");
          const expected = [
            "Ariba Buying","Store Buying","Reimbursement","Biobasic Primers Ordering","Sanger Sequencing Ordering","Nanopore Sequencing",
            "NTU Learn",
            "Safety Training (Document)","Core Facility Booking","Benchling","Codon Optimization","DepMap","Fluorescence Information","BLAST","Primer-BLAST","PDB","UniProt"
          ];
          const names = new Set(LINKS.map(x => x.name));
          expected.forEach(n => console.assert(names.has(n), `Missing link: ${n}`));
          console.assert(LINKS.every(x => ["Admin","Learning","Research"].includes(x.category)), "Invalid category detected");
          const withGuidance = LINKS.filter(x => x.guidance);
          console.assert(withGuidance.length === 4, "There should be exactly 4 guidance entries (Ariba, Reimbursement, Safety, Core Facility/Sanger note)");          
          console.groupEnd();
        } catch (e) {
          console.error("Self tests failed:", e);
        }
      }, []);

      const filtered = useMemo(() => {
        return items.filter((it) => {
          const inCat = category === "All" || it.category === category;
          const q = query.trim().toLowerCase();
          const inQuery = !q || it.name.toLowerCase().includes(q);
          return inCat && inQuery;
        });
      }, [items, query, category]);

      const showGuidanceNote = (note) => {
        alert(note);
      };

      return (
        <div className="min-h-screen">
          <header className="sticky top-0 z-10 backdrop-blur bg-neutral-950/70 border-b border-neutral-800">
            <div className="max-w-6xl mx-auto px-4 py-4 flex items-center gap-3">
              <div className="text-2xl font-bold">She Lab One-Stop Portal</div>
            </div>
            <div className="max-w-6xl mx-auto px-4 pb-4 flex flex-wrap gap-2">
              {CATEGORIES.map((c) => (
                <button
                  key={c}
                  onClick={() => setCategory(c)}
                  className={`px-3 py-1.5 rounded-2xl border ${category === c ? "bg-teal-600 border-teal-500" : "bg-neutral-900 border-neutral-800 hover:bg-neutral-800"}`}
                >
                  {c}
                </button>
              ))}
            </div>
          </header>

          <main className="max-w-6xl mx-auto px-4 py-6">
            <input
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              placeholder="Search..."
              className="w-full mb-4 rounded-2xl bg-neutral-900 border border-neutral-800 px-4 py-3 outline-none focus:ring-2 focus:ring-teal-600"
            />
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
              {filtered.map((it) => (
                <article key={it.name} className="rounded-2xl border border-neutral-800 bg-neutral-900 p-4 flex flex-col gap-3">
                  <h3 className="text-lg font-semibold">{it.name}</h3>
                  <div className="mt-auto flex gap-2">
                    <a href={it.url} target="_blank" rel="noreferrer noopener" className="flex-1 text-center px-3 py-2 rounded-xl bg-teal-700 hover:bg-teal-600">Open</a>
                    {it.guidance && it.guidance.href && (
                      <a href={it.guidance.href} download={it.guidance.filename} className="px-3 py-2 rounded-xl border border-neutral-700 hover:bg-neutral-800">Guidance</a>
                    )}
                    {it.guidance && it.guidance.note && (
                      <button onClick={() => showGuidanceNote(it.guidance.note)} className="px-3 py-2 rounded-xl border border-neutral-700 hover:bg-neutral-800">Guidance</button>
                    )}
                  </div>
                </article>
              ))}
            </div>
          </main>

          <footer className="max-w-6xl mx-auto px-4 py-10 text-sm opacity-70">
            <p>She Lab One-Stop Portal • Access admin, learning, and research resources easily.</p>
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
